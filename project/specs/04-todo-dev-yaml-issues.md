# TODO.dev.yaml and issues in Markdown

## Objective

Separate the backlog and metadata from the rich issue descriptions.

## Preferred direction

- One TODO per person, in the format TODO.dev.yaml (dev = developer slug).
- Each issue has its own Markdown file in yoda/project/issues/.
- TODO.dev.yaml references the path of each issue Markdown file.
- Issue files contain only free description (context, criteria, notes).
- A script creates the issue and the initial Markdown skeleton.

## Location and naming

- Issues folder: yoda/project/issues/
- File name: dev-id-slug.md
  - dev = developer slug
  - id = sequential, generated by the TODO script
  - slug = slug of the title

## Canonical ID

- Canonical issue id: dev-id (example: alex-001)
- Use the canonical id in depends_on.
- IDs are unique across the repo (not only within a single TODO).
- Optional human alias (example: A-001) is allowed only if a fixed prefix map exists per developer.

## Minimal schema for TODO.dev.yaml

Each issue item must contain:

- id: canonical id (dev-id), generated by the script
- title: issue title
- slug: slug of the title (used in the issue file name)
- description: brief description of what needs to be done
- entrypoints: array of objects with:
  - path: file path (issue or other artifact)
  - type: entrypoint type (issue, code, other in the future)
- status: to-do | doing | done | pending
- priority: 0 to 10 (10 = highest priority)
- labels: list of labels
- agent: Human | Codex | Antigravity | ...
- depends_on: list of ids
- pending_reason: reason for pending (required when status = pending)
- created_at, updated_at

Note: there is no owner, because each dev has their own TODO.

## Status (definitions)

- to-do: created, not started yet
- doing: started in the YODA Flow for the issue
- done: YODA Flow cycle finished
- pending: blocker identified during YODA Flow; record the reason in pending_reason and keep on stand-by until resolved

## State machine

- to-do -> doing -> done
- Any state can transition to pending
- pending -> to-do or doing (via pending_resolve.py)

## Benefits

- Single source of truth for work state.
- Bulk operations are simple (list, filter, reorder).
- Token savings by sending only TODO.dev.yaml for planning.
- Markdown free for high-quality writing.

## Minimal identifier

The issue Markdown file must have a minimal identifier to link to TODO.dev.yaml, for example:

- Use the ID in the Markdown title.

## Notes

- The AI must not edit TODO.dev.yaml directly; it must call scripts.
- The AI can freely edit the issue text.

## Ordering rule (deterministic)

todo_next.py must select the next issue using:

1) priority (desc)
2) position in the YAML list (top to bottom)

## Minimal example (TODO.dev.yaml)

```yaml
developer: alex
updated_at: "2026-01-21T19:40:50-03:00"

issues:
  - id: alex-001
    title: Create yoda/yoda.md
    slug: criar-yoda-yoda-md
    description: Define root agent instructions for this repository.
    status: doing
    priority: 10
    labels: [yoda, bootstrap]
    agent: Human
    depends_on: []
    entrypoints:
      - path: yoda/yoda.md
        type: issue
      - path: project/specs/07-agent-entry-and-root-file.md
        type: issue
    created_at: "2026-01-21T18:46:15-03:00"
    updated_at: "2026-01-21T18:46:15-03:00"

  - id: alex-002
    title: Issue templates usage guide
    slug: template-issue-regras-uso
    description: Document how agents should use issue templates.
    status: to-do
    priority: 8
    labels: [templates, docs]
    agent: Codex
    depends_on: [alex-001]
    entrypoints:
      - path: yoda/templates/issue.md
        type: issue
    created_at: "2026-01-21T19:26:26-03:00"
    updated_at: "2026-01-21T19:26:26-03:00"

  - id: alex-003
    title: Define scripts v1 interface
    slug: definir-scripts-v1
    description: Specify the v1 scripts interface and behavior.
    status: pending
    pending_reason: "Waiting for consensus on script naming."
    priority: 7
    labels: [scripts, v1]
    agent: Antigravity
    depends_on: [alex-001]
    entrypoints:
      - path: project/specs/13-yoda-scripts-v1.md
        type: issue
    created_at: "2026-01-21T19:17:35-03:00"
    updated_at: "2026-01-21T19:17:35-03:00"
```
